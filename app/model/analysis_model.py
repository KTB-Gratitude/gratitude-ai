import tempfile
import uuid
from distutils.command.upload import upload

from openai import OpenAI
import os
from dotenv import load_dotenv
import io
from PIL import Image, ImageDraw, ImageFilter
import xml.etree.ElementTree as ET
import re
import math
import time

load_dotenv(override=True)
client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
assistant = client.beta.assistants.retrieve("asst_caS8vMfyOpzLoA2roNqrW4i2")


def interpolate_points(p1, p2, steps):
    return [
        (
            p1[0] + (p2[0] - p1[0]) * i / steps,
            p1[1] + (p2[1] - p1[1]) * i / steps
        )
        for i in range(steps + 1)
    ]


def parse_path(d):
    commands = re.findall(r'([MLHVCSQTAZ])([^MLHVCSQTAZ]*)', d.upper())
    coordinates = []
    current_pos = (0, 0)
    for command, params in commands:
        params = [float(x) for x in re.findall(r'-?\d+\.?\d*', params)]
        if command == 'M':
            coordinates.append((params[0], params[1]))
            current_pos = (params[0], params[1])
        elif command == 'L':
            for i in range(0, len(params), 2):
                new_pos = (params[i], params[i + 1])
                coordinates.append(new_pos)
                current_pos = new_pos
    return coordinates


def calculate_path_length(coordinates):
    length = 0
    for i in range(1, len(coordinates)):
        dx = coordinates[i][0] - coordinates[i - 1][0]
        dy = coordinates[i][1] - coordinates[i - 1][1]
        length += math.sqrt(dx ** 2 + dy ** 2)
    return length



def svg_path_to_png(svg_string: str, size: tuple = (1422, 779)) -> str:
    try:
        root = ET.fromstring(svg_string)
        img = Image.new('RGBA', size, color=(255, 255, 255, 0))
        draw = ImageDraw.Draw(img)

        for path in root.findall('.//{http://www.w3.org/2000/svg}path'):
            d = path.get('d')
            stroke = path.get('stroke', 'black')
            stroke_width = int(float(path.get('stroke-width', '1')))
            coordinates = parse_path(d)

            if len(coordinates) > 1:
                draw.line(coordinates, fill=stroke, width=stroke_width, joint="curve")

        img = img.filter(ImageFilter.GaussianBlur(radius=0.5))

        # 임시 파일로 저장하고 경로 반환
        with tempfile.NamedTemporaryFile(delete=False, suffix='.png') as temp_file:
            img.save(temp_file, format='PNG')
            return temp_file.name

    except Exception as e:
        print(f"Error in svg_path_to_png: {e}")
        return None



def analysis(content: str) -> str:
    svg_string = """
    <svg xmlns="http://www.w3.org/2000/svg" id="drawingBoard"><path d="M 705.12890625 213.24609375 L 704.875 213.24609375 L 704.875 212.28515625 L 704.875 204.98046875 L 704.875 190.50390625 L 710.0546875 171.05078125 L 717.66015625 153.90625 L 728.65234375 137.60546875 L 751.0546875 117.22265625 L 771.08984375 104.7890625 L 797.96875 95.0625 L 825.609375 89.05859375 L 851.984375 86.859375 L 875.9375 86.859375 L 899.9453125 86.859375 L 925.109375 90.40625 L 940.50390625 96.32421875 L 957.640625 104.55078125 L 969.796875 112.64453125 L 979.94921875 121.671875 L 987.9921875 130.78515625 L 992.96484375 139.68359375 L 996.9453125 154.171875 L 997.453125 165.15234375 L 996.88671875 181.64453125 L 990.19921875 196.8125 L 980.66796875 213.30078125 L 971.77734375 225.14453125 L 959.984375 238.79296875 L 948.6953125 250.07421875 L 937.96875 259.6640625 L 927.2421875 268.6875 L 915.953125 276.5859375 L 908.59765625 281.38671875 L 900.84765625 285.734375 L 894.11328125 289.2890625 L 889.4765625 291.4453125 L 887.9609375 292.04296875 L 887.4375 292.55859375 L 887.17578125 292.55859375 L 886.9296875 292.55859375" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 877.55078125 290.125 L 882.60546875 290.125 L 892.828125 290.125 L 907.296875 290.125 L 917.0390625 290.125 L 928.8359375 293.33984375 L 938.4921875 297.91015625 L 947.640625 303.5 L 961.296875 316.6484375 L 969 327.11328125 L 975.43359375 337.89453125 L 980.3671875 350.02734375 L 984.39453125 364.49609375 L 988.39453125 384.171875 L 989.68359375 403.6171875 L 989.68359375 417.3828125 L 989.68359375 434.75 L 987.98828125 448.2890625 L 985.38671875 459.26953125 L 981.93359375 468.67578125 L 978.08203125 477.32421875 L 970.51953125 490.75 L 958.3203125 507.14453125 L 948.15625 516.734375 L 937.421875 523.1640625 L 926.43359375 526.80078125 L 914.62890625 529.4765625 L 894.9453125 531.47265625 L 882.15625 532.0625 L 862.61328125 532.8203125 L 845.23828125 532.8203125 L 825.12890625 532.8203125 L 807.75390625 532.8203125 L 790.37890625 532.19921875 L 774.97265625 530.41796875 L 759.56640625 526.26953125 L 737.05078125 516.078125 L 726.32421875 507.609375 L 716.4140625 499.3359375 L 708.3359375 490.18359375 L 699.3046875 480.01953125 L 690.2734375 469.85546875 L 680.42578125 458.84765625 L 672.71484375 448.375 L 666.09765625 439.7265625 L 661.01171875 430.5703125 L 656.828125 419.58203125 L 654.08984375 406.90625 L 652.50390625 395.91796875 L 652.10546875 387.52734375 L 652.10546875 384.3125 L 652.10546875 383.4765625 L 652.10546875 383.21484375 L 652.10546875 383.4453125 L 652.10546875 383.703125 L 652.10546875 384.203125 L 652.10546875 384.4453125 L 652.10546875 384.68359375 L 652.10546875 384.91796875 L 652.10546875 385.4140625" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 628.11328125 207.14453125 L 627.859375 207.14453125 L 627.859375 207.375 L 627.859375 211.28515625 L 626.4140625 217.453125 L 625.5078125 224.6953125 L 623.63671875 232.75 L 623.63671875 239.9921875 L 623.63671875 244.80859375 L 623.63671875 250.80859375 L 623.63671875 256.80859375 L 623.63671875 264.75390625 L 623.63671875 274.16015625 L 623.63671875 285.140625 L 623.63671875 295.3046875 L 623.63671875 309.79296875 L 623.63671875 317.73828125 L 624.14453125 327.14453125 L 624.625 335.79296875 L 625.58203125 344.49609375 L 626.0625 350.6640625 L 626.484375 357.2578125 L 627.38671875 364.5546875 L 628.1484375 368.890625 L 628.54296875 373.6484375 L 629.359375 379 L 630.12109375 383.22265625 L 630.8828125 387.4453125 L 631.6171875 391.1328125 L 632.63671875 395.22265625 L 633.234375 396.73046875 L 633.83203125 398.23828125 L 634.375 399.06640625 L 634.9453125 400.20703125 L 636.0859375 401.34765625 L 636.94140625 402.203125 L 637.76953125 402.74609375 L 638.59765625 403.2890625 L 639.42578125 403.546875 L 639.94140625 403.546875 L 640.76953125 403.546875 L 641.54296875 403.28515625 L 642.37109375 402.44921875 L 643.2265625 401.30078125 L 644.4765625 399.41796875 L 646.60546875 396.91015625 L 648.734375 394.40234375 L 650.9453125 391.44140625 L 652.67578125 389.01953125 L 653.98046875 386.7109375 L 655.453125 382.9609375 L 656.984375 378.73046875 L 658.1171875 374.98046875 L 659.3046875 370.21484375 L 660.4375 365.984375 L 661.171875 362.2890625 L 663.09765625 355.67578125 L 663.9140625 350.31640625 L 665.046875 346.56640625 L 665.86328125 341.20703125 L 666.625 336.9765625 L 667.359375 333.28125 L 668.12109375 329.05078125 L 668.91015625 324.2265625 L 669.75390625 318.2734375 L 671.55859375 311.0234375 L 672.375 305.55078125 L 673.6171875 299.54296875 L 674.40625 294.77734375 L 675.5625 288.10546875 L 676.3515625 283.33984375 L 677.30859375 274.62890625 L 679.79296875 265.21484375 L 681.26171875 255.80078125 L 682.078125 250.328125 L 682.89453125 244.96875 L 683.26171875 241.2734375 L 683.62890625 237.578125 L 683.62890625 234.36328125 L 683.62890625 231.62890625 L 683.62890625 228.89453125 L 683.62890625 226.16015625 L 683.62890625 223.42578125 L 683.62890625 218.84375 L 683.28515625 216.109375 L 682.65234375 214.2265625 L 682.36328125 212.7109375 L 681.8125 211.875 L 681.234375 210.7265625 L 680.65625 209.578125 L 679.73828125 208.0625 L 678.8203125 206.546875 L 677.5078125 204.23828125 L 675.8515625 202.26953125 L 674.1953125 200.30078125 L 672.5390625 198.33203125 L 671.0234375 197.12890625 L 668.93359375 195.63671875 L 667.78515625 194.7734375 L 666.63671875 194.1953125 L 665.12109375 193.90625 L 663.97265625 193.6171875 L 662.45703125 193.6171875 L 660.57421875 193.6171875 L 658.265625 193.6171875 L 656.3828125 193.6171875 L 654.07421875 193.6171875 L 651.765625 193.6171875 L 649.03125 193.6171875 L 646.72265625 194.26953125 L 643.47265625 195.234375 L 641.58984375 195.859375 L 640.07421875 196.45703125 L 638.92578125 197.3125 L 638.40234375 197.828125 L 637.5390625 198.68359375 L 636.98828125 199.51171875 L 636.125 200.65234375 L 635.234375 202.16015625 L 634.37109375 203.30078125 L 633.453125 204.80859375 L 632.90234375 205.63671875 L 632.61328125 206.77734375 L 632.3515625 207.60546875 L 632.08984375 208.69140625 L 632.08984375 209.20703125 L 632.08984375 210.03515625 L 632.08984375 210.55078125 L 632.08984375 211.06640625 L 632.08984375 211.58203125 L 632.08984375 211.83984375" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 670.25 194.55859375 L 670.25 194.32421875 L 670.25 189.6875 L 670.25 187.74609375 L 670.25 184.53125 L 670.25 182.6484375 L 670.25 180.33984375 L 670.25 177.125 L 670.25 173.91015625 L 670.64453125 168.55078125 L 672.625 163.78515625 L 676.2421875 157.44140625 L 680.3125 151.09765625 L 685.45703125 144.55859375 L 691.22265625 137.82421875 L 694.8203125 133.79296875 L 700.40234375 128.59765625 L 703.35546875 126.37890625 L 705.65625 125.06640625 L 707.53125 123.80859375 L 709.40625 122.86328125 L 712.1875 121.4375 L 714.9140625 120.0703125 L 717.21484375 119.0703125 L 718.72265625 118.46484375 L 719.23828125 118.203125 L 719.75390625 118.203125" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 647.9375 191.33203125 L 647.9375 190.86328125 L 647.9375 187.6484375 L 647.9375 183.953125 L 647.9375 181.53125 L 647.9375 176.05859375 L 647.9375 172.734375 L 647.9375 169.0390625 L 647.9375 166.25 L 647.25390625 163.515625 L 644.44140625 159.484375 L 642.7578125 157.71484375 L 638.64453125 155.2734375 L 632.93359375 152.625 L 629.23828125 151.51171875 L 625.54296875 150.3984375 L 622.328125 149.68359375 L 619.59375 148.65625 L 616.859375 147.96875 L 614.55078125 146.96875 L 612.2421875 146.30859375 L 609.93359375 145.6484375 L 608.05078125 145.015625 L 606.53515625 144.7265625 L 605.38671875 144.7265625 L 604.55078125 144.7265625 L 604.02734375 144.7265625 L 604.2578125 144.7265625" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 628.22265625 198.0625 L 628.22265625 196.421875 L 626.37109375 192.7265625 L 621.48828125 186.19921875 L 616.05078125 180.76171875 L 605.7734375 171.5 L 596.14453125 164.5546875 L 588.39453125 161.296875 L 578.22265625 157.734375 L 567.234375 156.17578125 L 555.4296875 156.17578125 L 544.44140625 156.17578125 L 534.26953125 156.17578125 L 525.61328125 156.171875 L 516.95703125 158.57421875 L 508.30078125 162.41796875 L 499.875 167.359375 L 489.68359375 174.28515625 L 483.9609375 178.66796875 L 478.04296875 183.671875 L 472.125 188.67578125 L 466.0390625 194.75390625 L 460.265625 201.48046875 L 455.11328125 208.01171875 L 451.87890625 212.40234375 L 449.06640625 216.79296875 L 447.2734375 220 L 446.24609375 222.7265625 L 445.90234375 225.453125 L 445.4765625 229.7890625 L 445.4765625 238.70703125 L 445.4765625 245.30078125 L 445.4765625 249.63671875 L 446.6640625 256.08203125 L 449.125 261.1796875 L 453.11328125 267.0078125 L 457.21875 270.71484375 L 461.86328125 274.08203125 L 465.60546875 275.94921875 L 472.19921875 278.60546875 L 477.55078125 280.24609375 L 483.49609375 281.08984375 L 488.48046875 282.33203125 L 493.83203125 283.1484375 L 502.2109375 283.54296875 L 505.953125 283.54296875 L 511.953125 283.54296875 L 517.3046875 283.54296875 L 521.640625 283.54296875 L 526.3984375 282.74609375 L 531.15625 281.94921875 L 535.37890625 281.1796875 L 539.06640625 280.4375 L 543.2890625 279.296875 L 546.9765625 278.5546875 L 549.703125 277.8671875 L 551.2109375 277.26171875 L 552.296875 276.73828125 L 552.8125 276.4765625 L 553.328125 276.21484375 L 553.84375 275.953125 L 554.359375 275.69140625 L 554.6171875 275.4296875 L 554.6171875 275.1875 L 554.6171875 274.94140625 L 554.6171875 274.69921875 L 554.35546875 274.19140625 L 553.20703125 274.19140625 L 551.69140625 274.19140625 L 549.80859375 274.19140625 L 544.265625 274.19140625 L 537.6640625 274.640625 L 529.7109375 277.4375 L 520.8046875 281.41796875 L 511.140625 285.98828125 L 500.40625 291.8828125 L 490.4609375 297.61328125 L 482.3203125 303.71484375 L 475.30078125 308.37890625 L 470.19921875 312.62109375 L 465.35546875 317.45703125 L 460.51171875 322.71875 L 455.21875 329.92578125 L 451.140625 336.26171875 L 446.04296875 345.84765625 L 443.77734375 353.08984375 L 441.42578125 361.03515625 L 439.94921875 370.44140625 L 438.953125 379.84765625 L 438.953125 388.49609375 L 438.953125 395.73828125 L 438.953125 402.33203125 L 440.73046875 408.92578125 L 443.8125 415.51953125 L 447.4296875 422.30859375 L 451.5 428.64453125 L 456.0234375 434.98046875 L 463.40625 442.36328125 L 468.2421875 447.19921875 L 473.50390625 452.03515625 L 479.21875 456.41796875 L 486.42578125 461.703125 L 493.21484375 465.3203125 L 500.00390625 468.484375 L 506.59765625 470.234375 L 513.83984375 471.1328125 L 521.13671875 472.03515625 L 529.08203125 472.03515625 L 537.02734375 472.03515625 L 544.26953125 469.76953125 L 551.51171875 466.59765625 L 562.3671875 459.51953125 L 569.796875 453.578125 L 573.86328125 450.015625 L 584.8515625 439.49609375 L 591.7734375 432.05859375 L 597.70703125 424.62109375 L 602.56640625 418.3125 L 604.890625 414.8203125 L 607.58203125 410.984375 L 609.3671875 408.13671875 L 610.78515625 404.921875 L 612.14453125 402.1875 L 613.44921875 399.87890625 L 614.671875 397.421875 L 615.21484375 396.5859375 L 615.7578125 395.75 L 616.04296875 394.6015625 L 616.61328125 393.453125 L 616.87109375 392.6171875 L 617.12890625 392.09375 L 617.38671875 391.5703125 L 617.64453125 391.05078125 L 618.2421875 389.53515625 L 619.4921875 387.65234375 L 620.7421875 385.76953125 L 621.8828125 384.62109375 L 622.42578125 383.78515625 L 622.94140625 383.26171875 L 622.94140625 383.015625" stroke="#000000" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 815.140625 397.8359375 L 814.88671875 397.8359375 L 814.65234375 397.8359375 L 810.90234375 397.8359375 L 802.6171875 397.8359375 L 793.203125 397.8359375 L 783.7890625 397.8359375 L 779.87109375 397.8359375 L 776.65625 397.8359375 L 775.8203125 397.8359375 L 775.8203125 400.94140625 L 775.8203125 406.94140625 L 774.80078125 422.24609375 L 774.2890625 432.41015625 L 774.2890625 441.05859375 L 775.5625 447.65234375 L 780.5390625 453.53515625 L 792.13671875 459.7109375 L 809.55859375 462.77734375 L 831.19921875 463.453125 L 846.8203125 463.453125 L 858.4765625 461.359375 L 867.8828125 457.3984375 L 871.90625 453.79296875 L 874.4765625 447.6171875 L 874.95703125 436.515625 L 871.45703125 406.0078125 L 867.36328125 391.41796875 L 861.01171875 377.50390625 L 853.18359375 369.62109375 L 840.11328125 365.16015625 L 825.63671875 365.16015625 L 808.26171875 365.16015625 L 796.23046875 369.5625 L 783.24609375 374.63671875 L 776.84765625 378.73828125 L 771.55078125 382.66796875 L 768.2578125 387.3125 L 767.83203125 395.3671875 L 771.71875 417.22265625 L 781.04296875 440.9453125 L 789.953125 457.97265625 L 800.96875 474.17578125 L 811.6875 482.63671875 L 822.66796875 484.6953125 L 837.25 484.6953125 L 845.49609375 477.9140625 L 857.6171875 462.96484375 L 863.421875 443.453125 L 866.34765625 417.0703125 L 866.34765625 386.83203125 L 859.6953125 359.91796875 L 846.83203125 340.62890625 L 820.24609375 326.36328125 L 798.59765625 322.30078125 L 775.79296875 321.62109375 L 762.01953125 321.62109375 L 751.33984375 321.62109375 L 742.62890625 322.0703125 L 738.87890625 322.8046875 L 737.36328125 323.40234375 L 737.36328125 325.3359375 L 737.36328125 331.50390625 L 739.4765625 342.484375 L 743.28515625 354.5078125 L 749.20703125 368.71875 L 756.6171875 378.1328125 L 762.12890625 381.49609375 L 766.3515625 381.49609375 L 769.1328125 380.38671875 L 770.7734375 375.02734375 L 772.4921875 362.01171875 L 774.4609375 342.5 L 777.109375 324.6171875 L 779.078125 305.10546875 L 779.078125 296.2265625 L 779.078125 290.21875 L 774.8828125 286.25 L 769.5234375 285.8515625 L 763.5703125 285.8515625 L 756.95703125 287.0390625 L 754.22265625 288.3984375 L 752.33984375 289.3359375 L 750.9140625 291.75 L 750.54296875 295.4375 L 750.54296875 298.64453125 L 750.9375 302.8671875 L 755.89453125 305.7265625 L 763.83984375 306.17578125 L 777.60546875 303.69140625 L 786.4140625 296.91015625 L 796.56640625 287.3125 L 803.73046875 276.30078125 L 811.73046875 258.02734375 L 816.23828125 238.29296875 L 817.92578125 224.74609375 L 818.3203125 218.03515625 L 818.3203125 212.67578125 L 815.7890625 210.19921875 L 813.0546875 210.19921875 L 809.359375 210.19921875 L 803.88671875 212.375 L 798.953125 215.26171875 L 791.2578125 220.12109375 L 783.33984375 226.08203125 L 775.484375 234.4375 L 771.3203125 240.34765625 L 768.203125 250.109375 L 768.203125 253.796875 L 778.81640625 257.32421875 L 797.3359375 257.9140625 L 822.5 257.9140625 L 846.95703125 249.31640625 L 861 240.84765625 L 872.3359375 230.1796875 L 878.12109375 220.265625 L 880.26171875 208.4609375 L 880.26171875 195.78515625 L 880.26171875 188.31640625 L 878.01953125 181.01171875 L 875.71875 177.1484375 L 872.80859375 175.48828125 L 870.5 175.48828125 L 868.19140625 175.48828125 L 866.30859375 175.80078125 L 864.42578125 176.42578125 L 862.1171875 177.078125 L 859.52734375 180.02734375 L 858.33203125 184.78515625 L 858.33203125 190.73046875 L 859.4375 195.546875 L 866.2265625 199.1640625 L 881.625 200.34765625 L 905.88671875 197.3828125 L 945.49609375 177.625 L 957.6796875 166.62109375 L 967.265625 154.203125 L 971.1015625 142.90625 L 971.58203125 134.953125 L 968.4375 129.2578125 L 962.484375 126.703125 L 955.234375 126.25 L 947.28125 126.25 L 935.25 127.43359375 L 921.8984375 132.02734375 L 910.5703125 136.796875 L 894.80078125 143.4765625 L 880.58203125 150.578125 L 864.42578125 160.2265625 L 856.28515625 166.328125 L 849.55078125 172.09375 L 844.11328125 177.5234375 L 840.14453125 183.23828125 L 836.51953125 190.02734375 L 835.75 194.36328125 L 835.75 198.5859375 L 835.75 201.3671875 L 838.1640625 203.15625 L 841.37109375 203.15625 L 844.09765625 203.15625 L 846.05859375 201.5 L 847.16015625 195.90234375 L 847.16015625 190.91015625 L 846.81640625 187.16015625 L 843.7265625 180.55859375 L 838.8828125 175.2890625 L 828.6875 168.3125 L 812.890625 162.2421875 L 790.0859375 157.41796875 L 762.4375 154.45703125 L 744.16015625 153.72265625 L 731.45703125 153.72265625 L 722.74609375 153.72265625 L 719.421875 154.03515625 L 718.39453125 155.99609375 L 718.81640625 162.65625 L 721.61328125 170.6015625 L 725.05859375 180.0078125 L 729.51953125 188.90625 L 734.94140625 196.84375 L 740.8515625 201.42578125 L 745.66796875 202.640625 L 750.42578125 203.03515625 L 754.16796875 203.03515625 L 758.1328125 200.5390625 L 761.30859375 196.5078125 L 765.37890625 189.7109375 L 769.58984375 182.23828125 L 773.69140625 174.8359375 L 774.68359375 172.52734375 L 774.96875 171.69140625 L 771.0234375 173.390625 L 761.90234375 181.43359375 L 753.765625 190.578125 L 739.78515625 209.2578125 L 732.00390625 228.0546875 L 728.76171875 247.5 L 728.76171875 260.5078125 L 736.203125 279.3359375 L 750.1328125 287.87890625 L 763.140625 289.73828125 L 782.97265625 287.0546875 L 791.35546875 279.2265625 L 794.1796875 270.515625 L 794.66015625 261.1015625 L 788.9765625 251.2734375 L 778.25 242.8046875 L 767.26171875 239.12890625 L 757.08984375 238.6171875 L 749.83984375 239.97265625 L 743.41796875 247.40234375 L 737.296875 263.1640625 L 734.8984375 279.546875 L 734.8984375 291.5703125 L 734.8984375 305.16796875 L 741.6796875 317.45703125 L 749.171875 319.74609375 L 757.8203125 320.2265625 L 765.98828125 317.3359375 L 771.16015625 310.34375 L 772.96484375 303.09375 L 772.96484375 295.84375 L 769.13671875 290.7421875 L 762.53515625 287.65234375 L 755.28515625 287.65234375 L 745.08984375 292.4765625 L 734.79296875 305.83984375 L 724.21875 324.41015625 L 717.10546875 349.4453125 L 715.91796875 363.9140625 L 715.91796875 374.13671875 L 722.33203125 381.0859375 L 734.60546875 386.5859375 L 747.38671875 388.27734375 L 762.78515625 388.8671875 L 771.93359375 388.8671875 L 779.87890625 386.54296875 L 783.984375 382.40234375 L 784.37890625 376.39453125 L 782.93359375 368.44140625 L 774.796875 359.48828125 L 763.2578125 353.40625 L 755.1953125 351.87890625 L 750.26171875 354 L 743.85546875 367.28515625 L 740.35546875 382.73828125 L 740.35546875 396.50390625 L 740.35546875 410.97265625 L 743.94140625 421.4453125 L 754.94140625 430.47265625 L 771.43359375 433.37109375 L 793.1328125 433.37109375 L 810.19140625 430.62890625 L 827.44140625 422.41796875 L 838.0234375 414.70703125 L 843.08203125 404.65625 L 843.08203125 398.703125 L 838.94140625 395.01171875 L 831.69140625 393.19921875 L 823.73828125 393.19921875 L 813.01171875 401.66015625 L 808.515625 410.64453125 L 805.12890625 424.18359375 L 805.12890625 437.72265625 L 806.65234375 448.703125 L 819.0546875 462.0078125 L 834.84375 468.0390625 L 867.3046875 470.2890625 L 900.23828125 467.8359375 L 942.24609375 449.0625 L 958.875 436.484375 L 971.2734375 420.91796875 L 974.796875 407.03515625 L 973.77734375 392.22265625 L 965.58203125 386.14453125 L 955.12890625 381.3984375 L 944.140625 380.859375 L 933.6875 383.5390625 L 925.44140625 393.46875 L 919.2578125 405.9375 L 916.62890625 416.91796875 L 916.1171875 423.84375 L 916.1171875 431.15234375 L 918.95703125 432.9375 L 922.1640625 432.9375 L 925.70703125 429.64453125 L 928.7890625 423.49609375 L 930.23046875 414.83984375 L 930.23046875 401.06640625 L 924.78515625 388.36328125 L 917.3828125 379.3515625 L 908.2890625 371.21484375 L 900.11328125 367.36328125 L 894.16015625 367.36328125 L 888.80078125 367.7578125 L 885.0859375 371.86328125 L 882.95703125 380.78125 L 882.95703125 386.78125 L 886.296875 391.28125 L 891.6484375 392.890625 L 897.59375 392.890625 L 903.19140625 386.6953125 L 907.25390625 377.03125 L 908.859375 365.2265625 L 908.3203125 353.421875 L 902.72265625 344.7734375 L 896.15625 339.6484375 L 889.5546875 337.46484375 L 882.3046875 337.01171875 L 869.3203125 339.89453125 L 863.26171875 344.53125 L 858.72265625 348.23828125 L 856.984375 350.65234375 L 856.6953125 351.48046875 L 856.6953125 351.73828125 L 858.1484375 351.73828125 L 859.7109375 350.48046875 L 860.7578125 347.265625 L 860.7578125 343.03515625 L 856 336.4140625 L 847.859375 329.2890625 L 838.953125 324.30859375 L 833.48046875 322.66015625 L 826.2734375 322.66015625 L 823.96484375 323.28515625 L 823.6484375 324.79296875 L 823.6484375 325.98828125 L 823.90625 326.81640625 L 827.11328125 327.15625 L 828.98828125 326.83984375 L 830.83203125 323.51171875 L 831.25390625 317.55859375 L 829.44140625 310.30859375 L 822.9921875 302.87109375 L 814.34375 296.76171875 L 808.87109375 295.03125 L 803.1640625 294.6328125 L 801.6484375 294.6328125 L 801.6484375 295.4609375 L 801.6484375 296.2890625 L 802.2734375 297.2265625" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 569.60546875 205.2890625 L 568.984375 204.05078125 L 568.17578125 204.05078125 L 566.29296875 204.05078125 L 564.41015625 204.05078125 L 562.1015625 204.05078125 L 559.3671875 204.05078125 L 558.21484375 204.05078125 L 555.42578125 204.05078125 L 553.1171875 204.05078125 L 548.05859375 208.7265625 L 543.80859375 212.96875 L 542.125 215.3828125 L 540.44140625 217.4296875 L 540.09765625 219.36328125 L 540.09765625 221.23828125 L 540.4375 223.96484375 L 544.14453125 228.0703125 L 549.23828125 232.3125 L 552.69921875 235.00390625 L 556.921875 236.9296875 L 560.609375 237.6640625 L 563.3359375 237.6640625 L 565.18359375 235.72265625 L 565.49609375 232.3984375 L 565.49609375 228.16796875 L 562.83203125 222.01953125 L 560.01953125 217.98828125 L 554.52734375 212.9765625 L 549.16796875 211.359375 L 541.86328125 210.93359375 L 533.91015625 210.93359375 L 525.25390625 213.3359375 L 518.00390625 216.5 L 512.28125 220.4609375 L 508.25 223.265625 L 505.15234375 226.328125 L 502.015625 229.765625 L 501.0703125 231.640625 L 500.75390625 232.578125 L 500.75390625 235.81640625 L 500.75390625 238.54296875 L 500.75390625 241.75 L 503.41796875 244.69921875 L 507.328125 246.59765625 L 511.55078125 246.96484375 L 516.30859375 246.96484375 L 521.4609375 243.5625 L 524.6875 239.95703125 L 526.98046875 235.7265625 L 528.6171875 228.3515625 L 528.6171875 224.12109375 L 528.6171875 220.90625 L 527.671875 219.0234375 L 526.5234375 217.875 L 525.0078125 217.55859375 L 523.4921875 217.55859375 L 521.609375 217.55859375 L 520.09375 218.18359375 L 519.23046875 219.32421875 L 518.6796875 220.15234375 L 518.6796875 220.66796875" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 569.5078125 294.7890625 L 569.5078125 294.546875 L 568.69921875 294.546875 L 563.00390625 294.546875 L 556.7734375 296.94921875 L 543.71875 307.3671875 L 533.78125 316.16796875 L 526.375 322.6015625 L 521.87109375 327.29296875 L 519.33984375 329.90234375 L 519.05078125 331.04296875 L 519.05078125 331.87109375 L 519.05078125 332.69921875 L 522.00390625 335.28125 L 526.703125 339.58203125 L 533.31640625 345.26171875 L 541.734375 350.203125 L 548.9765625 352.9140625 L 559.19140625 354.23828125 L 564.54296875 353.38671875 L 568.78515625 348.7109375 L 571.078125 344.84765625 L 571.8125 341.15234375 L 572.234375 335.79296875 L 571.60546875 333.00390625 L 567.06640625 329.2890625 L 561.70703125 327.640625 L 554.45703125 327.1875 L 545.80078125 327.1875 L 534.92578125 331.36328125 L 520.0859375 340.6640625 L 511.07421875 348.05859375 L 497.9140625 361.71484375 L 494.1171875 367.625 L 492.07421875 372.9765625 L 491.33203125 377.19921875 L 491.33203125 382.015625 L 493.17578125 385.3359375 L 497.28125 389.04296875 L 502.20703125 391.9296875 L 505.94921875 392.6640625 L 511.94921875 393.05859375 L 514.73046875 392.6875 L 516.859375 390.1796875 L 517.8515625 387.87109375 L 518.19140625 384.12109375 L 514.875 377.765625 L 510.03125 372.921875 L 505.37890625 370 L 500.01953125 367.95703125 L 494.01171875 367.05078125 L 489.24609375 367.05078125 L 484.84765625 369.1171875 L 480.59765625 373.78515625 L 476.20703125 379.5 L 474.33203125 383.2421875 L 472.62890625 389.2421875 L 472.62890625 394 L 473.0234375 398.7578125 L 479.984375 406.140625 L 486.99609375 410.8046875 L 493.78515625 413.96875 L 501.02734375 415.3203125 L 508.97265625 415.80078125 L 516.91796875 414.35546875 L 524.125 409.0625 L 530.5390625 401.625 L 535.9921875 393.70703125 L 538.59375 388.15234375 L 540.71484375 382.19921875 L 541.8203125 378.50390625 L 542.16015625 376.1953125 L 542.16015625 374.6796875 L 538.37109375 373.05078125 L 535.15625 372.6796875 L 530.33203125 372.6796875 L 525.82421875 375.98828125 L 522.421875 381.5078125 L 520.18359375 387.6484375 L 519.73046875 392.6328125 L 519.73046875 398.65234375 L 522.1640625 403.859375 L 526.38671875 406.15234375 L 532.33203125 406.57421875 L 539.57421875 406.57421875 L 546.55859375 401.875 L 556.3359375 390.5625 L 561.27734375 382.13671875 L 564.5546875 374.18359375 L 566.4765625 365.52734375 L 566.95703125 359.3515625 L 566.95703125 352.75 L 566.95703125 347.390625 L 565.84765625 343.6953125 L 563.09375 339.89453125 L 559.73828125 337.62109375 L 556.5234375 336.90625 L 554.21484375 336.90625 L 552.69921875 336.90625 L 552.3828125 338.78125 L 552.3828125 343.4609375 L 553.0625 345.76171875 L 555.64453125 348.71484375 L 558.59765625 350.92578125 L 561.8046875 351.6328125 L 564.10546875 351.97265625 L 565.24609375 351.97265625 L 565.53125 350.45703125 L 565.53125 348.57421875 L 565.53125 344.34375 L 563.94140625 339.578125 L 562.4609375 335.828125 L 560.5859375 332.078125 L 558.69921875 329.1953125 L 558.1484375 328.62109375 L 557.88671875 328.62109375 L 557.640625 328.62109375" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 580.80859375 196.66796875 L 581.34765625 196.9375 L 581.34765625 197.16796875 L 581.34765625 197.41015625 L 581.34765625 198.23828125 L 581.34765625 199.74609375 L 581.34765625 202.046875 L 581.34765625 207.6328125 L 581.34765625 210.94921875 L 581.34765625 215.765625 L 581.34765625 222.359375 L 582.19140625 228.3046875 L 583.0078125 233.76953125 L 583.4296875 239.12109375 L 584.24609375 244.47265625 L 585.08984375 250.47265625 L 586.73046875 255.82421875 L 587.8359375 259.140625 L 588.99609375 263.36328125 L 590.12890625 267.10546875 L 591.48828125 271.1953125 L 592.140625 273.49609375 L 592.453125 275.37109375 L 592.79296875 277.671875 L 592.79296875 280.3984375 L 593.16015625 283.60546875 L 593.16015625 288.95703125 L 593.16015625 293.71484375 L 593.16015625 298.05078125 L 593.16015625 304.75390625 L 593.16015625 309.08984375 L 593.16015625 313.84765625 L 593.16015625 318.0703125 L 593.16015625 322.828125 L 591.91015625 331.20703125 L 590.9453125 336.89453125 L 590.4921875 341.87890625 L 589.72265625 346.21484375 L 588.8984375 351.56640625 L 588.1015625 356.32421875 L 587.73046875 360.546875 L 587.359375 364.76953125 L 587.359375 368.9921875 L 586.98828125 373.21484375 L 586.58984375 377.4375 L 586.24609375 380.64453125 L 585.53125 383.8515625 L 584.1875 387.515625 L 583.1875 389.81640625 L 581.875 392.1171875 L 580.6171875 393.9921875 L 578.90625 396.37890625 L 577.16796875 398.79296875 L 575.03125 401.29296875 L 572.44140625 404.24609375 L 569.8515625 407.56640625 L 567.26171875 410.1484375 L 565.125 412.6484375 L 562.6171875 414.77734375 L 560.6484375 416.42578125 L 558.6796875 418.07421875 L 555.76953125 420.34765625 L 553.34765625 422.078125 L 550.5 423.86328125 L 548.078125 425.59375 L 545.65625 427.32421875 L 543.7734375 428.57421875 L 541.46484375 429.87890625 L 539.94921875 431.07421875 L 538.06640625 432.32421875 L 536.55078125 433.234375 L 535.03515625 434.1171875 L 533.51953125 434.71484375 L 532.00390625 435.3125 L 530.12109375 435.9375 L 526.4453125 436.58984375 L 524.13671875 436.90234375 L 522.25390625 437.21484375 L 520.37109375 437.21484375 L 519.22265625 437.21484375" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 867.05859375 102.82421875 L 866.8046875 102.82421875 L 866.33203125 102.82421875 L 864.81640625 102.82421875 L 862.02734375 102.82421875 L 859.71875 102.82421875 L 856.0234375 102.82421875 L 853.6015625 102.82421875 L 850.38671875 102.82421875 L 848.078125 102.82421875 L 845.76953125 102.82421875 L 843.4609375 102.82421875 L 839.3046875 102.82421875 L 836.515625 103.19140625 L 831.69140625 105.203125 L 828.4765625 106.6484375 L 824.24609375 108.1796875 L 820.015625 110.078125 L 816.3203125 111.5546875 L 811.9765625 113.16796875 L 807.15234375 115.1796875 L 803.40234375 116.65234375 L 799.171875 118.18359375 L 794.94140625 120.08203125 L 791.24609375 121.92578125 L 788.03125 123.34375 L 783.81640625 125.80859375 L 780.96875 127.59375 L 777.75390625 129.01171875 L 774.90625 130.796875 L 771.69140625 132.58203125 L 768.73046875 134.79296875 L 765.8828125 136.578125 L 763.03515625 138.36328125 L 760.7265625 139.66796875 L 758.84375 140.91796875 L 756.9609375 142.16796875 L 755.078125 143.41796875 L 753.1953125 144.35546875 L 750.73828125 145.86328125 L 749.22265625 146.4609375 L 748.07421875 147.31640625 L 746.92578125 148.171875 L 745.41015625 149.08203125 L 743.89453125 150.27734375 L 742.37890625 151.47265625 L 741.23046875 152.328125 L 740.08203125 153.46875 L 738.93359375 154.609375 L 737.67578125 156.484375 L 736.41796875 158.41796875 L 735.16015625 160.29296875 L 733.84765625 162.59375 L 732.53515625 164.89453125 L 730.5390625 168.55859375 L 729.171875 171.28515625 L 727.859375 173.5859375 L 726.6015625 175.4609375 L 725.65625 177.3359375 L 724.65625 179.63671875 L 723.65625 181.9375 L 722.65625 184.23828125 L 721.62890625 186.96484375 L 720.6015625 189.69140625 L 719.62890625 191.9921875 L 718.6015625 194.71875 L 717.1171875 200.3046875 L 715.5234375 205.0625 L 714.3828125 208.8046875 L 713.1875 213.5625 L 711.9921875 218.3203125 L 711.22265625 222.54296875 L 710.3984375 228.0078125 L 709.57421875 233.359375 L 708.8046875 237.6953125 L 708.3515625 244.2890625 L 707.98046875 249.75390625 L 707.98046875 255.69921875 L 707.98046875 262.29296875 L 707.98046875 269.53515625 L 707.98046875 281.1015625 L 707.98046875 289.046875 L 708.91015625 296.9921875 L 709.83984375 304.9375 L 711.27734375 312.6796875 L 712.125 319.125 L 713.39453125 325.0703125 L 714.6953125 330.7578125 L 715.828125 334.5 L 717.63671875 341.796875 L 718.3984375 346.1328125 L 719.61328125 351.484375 L 721.19921875 356.2421875 L 723.125 362.84375 L 724.28515625 367.06640625 L 725.81640625 371.2890625 L 727.4296875 375.625 L 728.9609375 379.84765625 L 730.09375 384.0703125 L 731.2265625 388.29296875 L 732.703125 391.98046875 L 733.72265625 394.70703125 L 734.6875 397.0078125 L 735.3125 398.8828125 L 735.8828125 400.0234375 L 736.453125 401.1640625 L 737.078125 403.0390625 L 739.23046875 407.71875 L 741.015625 410.92578125 L 744.01171875 416.47265625 L 746.47265625 421.82421875 L 748.33984375 425.56640625 L 751.14453125 429.95703125 L 753.7265625 433.27734375 L 756.30859375 435.859375 L 759.1484375 437.64453125" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 774.19140625 211.15625 L 772.62890625 213.8828125 L 772.3125 212.47265625 L 775.453125 206.77734375 L 782.2578125 197.37109375 L 792.32421875 184.92578125 L 801.41015625 174.73046875 L 811.56640625 165.69921875 L 816.99609375 161.3046875 L 821.38671875 158.0703125 L 825.10546875 156.3828125 L 826.61328125 156.09375 L 827.44140625 156.09375 L 828.94921875 155.48828125 L 830.45703125 154.59765625 L 832.87109375 152.859375 L 835.82421875 150.26953125 L 839.9296875 146.5546875 L 845.19140625 141.7109375 L 849.21484375 138.8984375 L 852.90234375 136.6796875 L 855.68359375 135.25390625 L 857.19140625 134.6484375 L 858.01953125 134.6484375 L 858.79296875 134.6484375 L 859.30859375 134.6484375 L 859.82421875 134.6484375 L 861.33203125 134.6484375 L 863.20703125 134.6484375 L 867.4296875 134.6484375 L 872.1875 135.04296875 L 876.5234375 135.8046875 L 882.2109375 136.625 L 886.96875 137.8125 L 890.65625 138.91796875 L 893.86328125 139.99609375 L 896.1640625 140.9609375 L 898.9765625 142.8359375 L 901.27734375 144.140625 L 903.15234375 145.390625 L 905.11328125 147.0390625 L 906.98828125 148.2890625 L 908.94921875 149.9375 L 910.08984375 151.078125 L 910.91796875 151.90625 L 911.74609375 152.734375 L 912.6015625 153.875 L 913.7421875 155.015625 L 916.2421875 157.515625 L 920.34765625 161.22265625 L 923.35546875 163.83203125 L 926.87890625 167.35546875 L 928.38671875 168.55078125 L 928.90234375 169.06640625 L 929.16015625 169.58203125 L 928.87109375 168.76953125 L 927.8984375 166.4609375 L 926.953125 164.578125 L 925.953125 162.26953125 L 925.0078125 160.38671875 L 923.75 158.50390625 L 922.01171875 155.71484375 L 919.109375 151.38671875 L 916.890625 148.42578125 L 914.671875 145.46484375 L 912.93359375 143.04296875 L 911.1953125 140.25390625 L 909.7421875 137.40625 L 908.5390625 135.890625 L 907.93359375 134.375 L 907.0703125 133.2265625 L 906.4921875 132.078125 L 905.6015625 130.5625 L 904.3984375 129.046875 L 903.140625 127.1640625 L 901.484375 125.1953125 L 898.74609375 121.7734375 L 896.23828125 119.63671875 L 894.1875 117.52734375 L 891.765625 115.7890625 L 889.8828125 114.53125 L 888 113.5859375 L 886.1171875 112.640625 L 884.234375 112.0078125 L 882.3515625 111.69140625 L 880.46875 111.69140625 L 878.5859375 111.69140625 L 877.0703125 111.69140625 L 875.5546875 111.69140625 L 872.3046875 112.65625 L 869.99609375 113.6484375 L 868.11328125 114.8984375 L 865.37890625 115.91796875 L 863.0703125 117.22265625 L 859.85546875 118.640625 L 857.0078125 120.42578125 L 854.2734375 121.78515625 L 851.42578125 123.5703125 L 848.578125 125.35546875 L 846.26953125 126.66015625 L 843.53515625 128.01953125 L 841.11328125 129.75 L 838.37890625 131.109375 L 835.5546875 132.671875 L 833.671875 133.609375 L 831.7890625 134.546875 L 830.2734375 135.4296875 L 828.390625 136.6796875 L 826.875 137.875 L 825.93359375 138.5 L 822.59765625 140.828125 L 820.2890625 142.1328125 L 818.40625 143.3828125 L 816.5234375 144.3203125 L 814.640625 145.2578125 L 813.125 145.85546875 L 811.71484375 146.68359375 L 810.87890625 147.2265625 L 810.35546875 147.2265625 L 810.109375 147.2265625 L 810.109375 147.4609375 L 811.7109375 147.80078125 L 814.91796875 148.87890625 L 821.0859375 151.93359375 L 835.890625 157.8515625 L 852.2734375 161.484375 L 866.0390625 163.23046875 L 886.40625 165.51171875 L 893.109375 166.38671875 L 899.109375 166.8359375 L 901.8359375 167.515625 L 903.03125 167.7734375 L 903.859375 167.7734375 L 904.375 167.7734375 L 904.6171875 167.7734375 L 904.875 167.7734375 L 905.375 167.7734375 L 905.890625 167.7734375 L 906.71875 167.7734375 L 907.234375 167.7734375 L 907.4921875 168.03125 L 907.4921875 168.7890625 L 907.203125 169.6171875 L 904.328125 171.37890625 L 896.578125 175.24609375 L 888.66015625 179.625 L 873.54296875 189.66015625 L 859.578125 199.359375 L 844.015625 212.3203125 L 829.44140625 227.56640625 L 819.25390625 238.76171875 L 808.02734375 253.0546875 L 800.66015625 264.93359375 L 798.10546875 270.3984375 L 796.484375 277.59375 L 796.484375 280.3203125 L 796.484375 283.046875 L 797.50390625 285.7734375 L 799.2890625 288.61328125 L 800.59375 290.9140625 L 801.53125 292.7890625 L 802.44140625 294.296875 L 803.296875 295.4375 L 803.8125 295.953125 L 804.328125 296.46875 L 804.5859375 296.7265625 L 804.828125 296.96875 L 804.828125 296.47265625 L 804.828125 296.2265625 L 804.828125 295.96484375 L 804.828125 296.1953125 L 804.828125 299.40234375 L 804.828125 304.75390625 L 804.828125 319.2421875 L 804.828125 330.22265625 L 804.828125 342.890625 L 804.31640625 350.9453125 L 803.86328125 358.1875 L 803.86328125 363.00390625 L 803.86328125 365.78515625 L 803.86328125 367.29296875 L 803.86328125 367.80859375 L 803.86328125 368.06640625 L 804.09765625 368.06640625" stroke="#779ecb" stroke-width="40" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 1091.8125 200.17578125 L 1091.11328125 198.078125 L 1091.11328125 197.828125 L 1091.11328125 197.30859375 L 1090.3046875 197.30859375 L 1088.36328125 197.30859375 L 1083.24609375 196.51171875 L 1077.88671875 196.51171875 L 1073.12109375 196.51171875 L 1070.33203125 196.51171875 L 1067.1171875 196.51171875 L 1065.234375 196.51171875 L 1064.3984375 196.51171875 L 1063.25 196.51171875 L 1060.94140625 197.13671875 L 1057.47265625 200.19921875 L 1054.71875 203.2578125 L 1051.25 206.3203125 L 1049.1953125 208.3671875 L 1048.04296875 210.078125 L 1047.78125 210.90625 L 1047.78125 213.6328125 L 1047.3828125 217.85546875 L 1047.3828125 223.85546875 L 1047.3828125 228.671875 L 1047.3828125 234.0234375 L 1047.75 238.83984375 L 1050.3515625 244.38671875 L 1053.04296875 248.21484375 L 1056.75 252.3203125 L 1059.89453125 255.46484375 L 1064.42578125 258.75 L 1068.95703125 261.69140625 L 1075.55859375 264.3828125 L 1079.24609375 265.859375 L 1082.453125 266.9375 L 1085.1796875 267.6171875 L 1087.48046875 268.26953125 L 1090.6875 269.6875 L 1094.4296875 271.21484375 L 1098.171875 272.7421875 L 1103.63671875 275.65625 L 1108.62109375 277.69140625 L 1111.94140625 279.90234375 L 1116.5 282.3359375 L 1120.72265625 284.62890625 L 1126.25390625 287.578125 L 1129.4609375 288.65625 L 1132.1875 289.67578125 L 1134.9140625 290.35546875 L 1137.21484375 291.0078125 L 1139.08984375 291.0078125 L 1140.59765625 291.0078125 L 1141.42578125 291.0078125 L 1141.94140625 291.0078125 L 1142.45703125 291.0078125 L 1142.97265625 291.0078125 L 1143.85546875 289.8046875 L 1146.01171875 286.95703125 L 1149.859375 281.796875 L 1158.98828125 271.640625 L 1164.921875 264.203125 L 1170.06640625 257.6640625 L 1174.73046875 250.64453125 L 1178.34765625 243.84765625 L 1182.078125 235.89453125 L 1186.03125 226.48046875 L 1188.99609375 217.06640625 L 1191.3984375 208.41015625 L 1192.78125 200.45703125 L 1193.6796875 193.20703125 L 1193.6796875 186.60546875 L 1193.6796875 179.35546875 L 1192.0625 172.62890625 L 1189.76171875 168.3984375 L 1187.171875 165.0703125 L 1183.140625 161.46484375 L 1180.6328125 159.328125 L 1175.47265625 155.47265625 L 1172.2578125 154.046875 L 1168.02734375 152.11328125 L 1163.796875 150.97265625 L 1160.1015625 150.23046875 L 1156.40625 149.859375 L 1152.65625 149.859375 L 1147.890625 149.859375 L 1142.53125 149.859375 L 1134.1953125 151.1328125 L 1128.2421875 153.25390625 L 1124.4921875 154.7265625 L 1120.796875 156.5703125 L 1118.9140625 157.8203125 L 1117.765625 158.67578125 L 1117.50390625 159.19140625 L 1117.2421875 159.70703125 L 1116.6640625 160.84765625 L 1115.63671875 163.57421875 L 1113.78515625 167.26171875 L 1111.796875 172.01953125 L 1110.26171875 176.35546875 L 1108.3515625 182.421875 L 1107.609375 186.109375 L 1107.265625 189.31640625 L 1107.265625 192.04296875 L 1107.265625 194.34375 L 1107.265625 196.64453125 L 1107.60546875 199.37109375 L 1108.625 202.09765625 L 1109.6171875 204.3984375 L 1110.609375 206.69921875 L 1111.6015625 209 L 1112.484375 210.5078125 L 1113.0546875 211.6484375 L 1113.65234375 213.15625 L 1114.5078125 214.8671875 L 1115.390625 216.375 L 1115.9609375 217.515625 L 1116.4765625 218.03125 L 1116.76171875 218.859375 L 1117.01953125 219.1171875 L 1117.01953125 219.359375 L 1117.01953125 219.125 L 1116.7734375 218.6171875 L 1116.51171875 218.09375 L 1116.25 217.5703125 L 1115.98828125 217.30859375" stroke="#ff6961" stroke-width="22" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 1155.0546875 420.25 L 1155.0546875 419.78125 L 1152.09375 417.19140625 L 1147.5546875 413.8984375 L 1142.02734375 410.91796875 L 1136.66796875 408.875 L 1131.30859375 407.65234375 L 1119.73046875 405.80859375 L 1112.48046875 405.35546875 L 1106.3046875 404.87109375 L 1099.03515625 404.87109375 L 1093.02734375 404.87109375 L 1088.203125 404.87109375 L 1084.98828125 405.91796875 L 1082.56640625 407.6484375 L 1080.828125 410.0625 L 1078.49609375 413.890625 L 1076.11328125 418.6484375 L 1073.4765625 425.2421875 L 1071.74609375 430.70703125 L 1069.64453125 439.03125 L 1069.64453125 444.3828125 L 1069.64453125 449.140625 L 1071.84765625 454.6875 L 1076.9921875 461.21875 L 1084.421875 468.140625 L 1093.8203125 474.9453125 L 1102.96875 480.0234375 L 1112.375 483.9765625 L 1121.0234375 486.859375 L 1130.4296875 489.34375 L 1139.8359375 492.30859375 L 1148.484375 494.7109375 L 1156.4296875 497.5078125 L 1167.29296875 501.12109375 L 1172.109375 503.1328125 L 1176.8671875 505.11328125 L 1181.08984375 507.01171875 L 1184.296875 508.4296875 L 1188.51953125 510.72265625 L 1191.30078125 512.453125 L 1194.02734375 513.8125 L 1196.328125 515.1171875 L 1197.46875 515.97265625 L 1197.984375 516.48828125 L 1198.5 516.74609375 L 1198.73046875 516.74609375 L 1198.99609375 515.66796875 L 1200.78125 512.453125 L 1203.86328125 506.3046875 L 1208.66796875 498.609375 L 1212.87890625 491.13671875 L 1217.68359375 483.44140625 L 1221.89453125 475.96875 L 1225.625 468.015625 L 1228.875 460.0625 L 1231.7578125 451.40625 L 1234.16015625 442.75 L 1236.53125 430.46875 L 1237.94140625 422.515625 L 1238.84375 414.765625 L 1239.18359375 410.421875 L 1239.18359375 405.65625 L 1239.18359375 399.6484375 L 1238.38671875 394.8828125 L 1236.3984375 390.1171875 L 1234.06640625 386.625 L 1230.88671875 382.6484375 L 1227.6796875 378.84765625 L 1223.703125 375.66796875 L 1218.68359375 372.74609375 L 1214.765625 370.83984375 L 1207.6171875 368.0546875 L 1202.14453125 366.77734375 L 1197.9140625 366.0078125 L 1190.609375 365.09765625 L 1185.25 364.671875 L 1179.5546875 364.1875 L 1175.2109375 363.76171875 L 1170.98046875 363.390625 L 1167.765625 363.390625 L 1165.82421875 363.390625 L 1164.67578125 363.390625 L 1164.15234375 363.6484375 L 1163.57421875 364.7890625 L 1162.2578125 368.02734375 L 1160.83203125 371.234375 L 1159.296875 374.9765625 L 1157.36328125 379.19921875 L 1155.87890625 382.88671875 L 1155.19140625 385.61328125 L 1154.84765625 387.9140625 L 1154.84765625 390.640625 L 1154.84765625 393.3671875 L 1154.84765625 397.0546875 L 1155.21484375 401.27734375 L 1155.9765625 405.5 L 1157.453125 409.1875 L 1159.15625 413.33203125 L 1159.7265625 414.47265625 L 1160.26953125 415.30078125 L 1160.52734375 415.81640625 L 1160.76171875 415.81640625" stroke="#ff6961" stroke-width="22" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 117.72265625 161.5703125 L 117.72265625 163.64453125 L 117.72265625 167.8671875 L 117.72265625 174.4609375 L 117.72265625 181.703125 L 117.72265625 187.0546875 L 117.72265625 190.00390625 L 117.72265625 192.78515625 L 117.72265625 194.29296875 L 117.72265625 195.06640625 L 118.19140625 195.06640625 L 121.3984375 193.98046875 L 125.62109375 192.07421875 L 130.97265625 189.60546875 L 134.66015625 187.75390625 L 137.8671875 186.328125 L 139.7421875 185.6953125 L 140.828125 185.14453125 L 141.0859375 185.14453125 L 141.3203125 184.8828125 L 141.578125 184.37890625" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 167.1328125 127.12890625 L 167.1328125 129.47265625 L 167.1328125 130.98046875 L 167.1328125 132.48828125 L 167.1328125 134.36328125 L 167.1328125 136.23828125 L 167.1328125 138.96484375 L 167.1328125 142.171875 L 167.1328125 147.5234375 L 167.1328125 153.46875 L 167.1328125 159.46875 L 167.1328125 165.46875 L 167.1328125 170.796875 L 167.1328125 174.484375 L 167.1328125 176.359375 L 167.1328125 178.29296875 L 167.1328125 179.80078125 L 167.1328125 182.1015625 L 167.1328125 184.828125 L 167.1328125 189.05078125 L 167.5 192.73828125 L 167.83984375 195.46484375 L 168.15234375 197.765625" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 163.98828125 163.55078125 L 164.21875 163.55078125 L 167.42578125 163.55078125 L 176.83203125 162.07421875 L 184.29296875 160.65625 L 193.69921875 158.671875 L 198.68359375 158.21875 L 203.84375 157.8203125 L 204.4140625 157.8203125" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 213.96875 119.28125 L 213.96875 119.74609375 L 213.96875 123.48828125 L 213.96875 129.48828125 L 213.96875 139.703125 L 213.96875 146.296875 L 213.96875 150.20703125 L 213.96875 152.98828125 L 213.96875 154.18359375 L 213.96875 154.75390625 L 214.5390625 153.70703125 L 218.875 152.171875 L 229.85546875 149.03515625 L 240.24609375 146.43359375 L 255.29296875 142.8671875 L 263.23828125 140.99609375 L 267.4609375 140.59765625 L 269.76171875 140.25390625 L 270.27734375 140.25390625 L 270.79296875 140.25390625 L 270.79296875 140.015625 L 270.79296875 139.1796875 L 270.50390625 138.03125 L 269.76171875 135.609375 L 269.36328125 129.6015625 L 268.48046875 122.890625 L 267.1484375 116.2890625 L 265.98046875 109.5625 L 265.3203125 107.25390625 L 264.76953125 106.41796875 L 264.21875 105.58203125 L 263.328125 104.37890625 L 261.9609375 101.64453125 L 260.0546875 97.4140625 L 258.62890625 94.19921875 L 257.6015625 91.46484375 L 256.73828125 90.31640625 L 256.73828125 89.79296875" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 219.89453125 129.34375 L 222.4375 129.34375 L 227.1953125 129.34375 L 232.546875 129.34375 L 238.4921875 129.34375 L 241.44140625 129.34375 L 244.6484375 129.34375 L 246.15625 129.34375 L 246.4140625 129.34375" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 289.01953125 75.4765625 L 289.01953125 80.73828125 L 289.1015625 88.79296875 L 291.86328125 101.4609375 L 295.1875 117.02734375 L 296.6796875 125.8984375 L 298.3125 138.56640625 L 300.34375 148.73046875 L 302.8828125 158.89453125 L 304.9140625 169.1171875 L 306.4375 176.04296875 L 308.1875 182.63671875 L 309.234375 187.20703125 L 309.77734375 188.03515625 L 309.77734375 188.55078125 L 309.77734375 187.8046875" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 111.375 281.0625 L 111.140625 281.0625 L 113.921875 281.0625 L 118.73828125 279.4140625 L 124.73828125 276.41015625 L 135.6015625 272.33203125 L 140.49609375 271.84765625 L 144.23828125 271.84765625 L 145.74609375 271.84765625 L 146.00390625 271.84765625 L 146.00390625 272.3359375 L 146.00390625 273.4765625 L 146.00390625 276.34765625 L 145.60546875 281.10546875 L 144.640625 289.80859375 L 141.67578125 305.20703125 L 138.93359375 317.23046875 L 135.37890625 332.62890625 L 132.8046875 342.70703125 L 130.8203125 352.11328125 L 129.65234375 356.9296875 L 129.30859375 359.23046875 L 129.30859375 360.05859375 L 129.30859375 360.31640625" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 143.30078125 314.4296875 L 145.12890625 314.4296875 L 149.88671875 314.4296875 L 155.23828125 314.4296875 L 164.15625 314.4296875 L 169.41796875 314.4296875 L 172.19921875 314.4296875 L 175.40625 314.4296875 L 177.70703125 314.4296875 L 178.84765625 314.4296875 L 179.67578125 314.6875 L 179.93359375 314.6875 L 179.93359375 314.9296875" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 148.74609375 335.83203125 L 148.74609375 337.234375 L 148.34765625 341.45703125 L 149.13671875 346.21484375 L 150.61328125 349.90234375 L 150.98046875 352.68359375 L 151.34765625 355.46484375 L 151.6328125 356.60546875 L 151.6328125 357.17578125" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 124.29296875 377.9453125 L 125.3984375 375.99609375 L 127.609375 373.06640625 L 132.27734375 368.81640625 L 138.7734375 362.14453125 L 145.5 355.41015625 L 152.9296875 348.98828125 L 156.953125 345.75390625 L 161.484375 342.0390625 L 164.4375 339.44921875 L 166.3125 338.19140625 L 168.2734375 336.53515625 L 172.1328125 333.6875 L 175.453125 331.09765625 L 179.0234375 328.3671875 L 182.34375 325.77734375 L 185.6640625 323.55859375 L 189.01171875 321.28515625 L 190.97265625 319.62890625 L 192.11328125 319.05078125 L 192.62890625 318.7890625 L 193.14453125 318.7890625 L 192.91015625 318.7890625 L 192.6640625 318.7890625" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 212.40625 255.171875 L 211.1640625 255.171875 L 211.1640625 255.63671875 L 211.1640625 258.84375 L 211.1640625 263.06640625 L 211.1640625 266.015625 L 211.1640625 269.22265625 L 211.1640625 271.09765625 L 211.1640625 272.23828125 L 211.98046875 275.22265625 L 213.71484375 276.5859375 L 216.66796875 279.16796875 L 219.5078125 280.953125 L 221.3828125 282.203125 L 222.890625 282.80078125 L 224.765625 283.11328125 L 226.640625 283.11328125 L 228.94140625 283.11328125 L 232.68359375 282.71484375 L 236.90625 280.78125 L 241.6640625 278.3984375 L 247.37890625 274.4609375 L 251.40234375 271.27734375 L 257.125 265.03515625 L 258.54296875 262.24609375 L 259.27734375 258.55078125 L 259.69921875 254.20703125 L 259.69921875 250.51171875 L 259.69921875 247.77734375 L 258.44140625 245.89453125 L 256.87109375 244.32421875 L 254.90234375 242.66796875 L 251.6875 241.21484375 L 247.45703125 240.4453125 L 242.46484375 240.1015625 L 236.51171875 240.1015625 L 226.28515625 240.1015625 L 221.4609375 240.1015625 L 216.6953125 240.49609375 L 212.46484375 242.02734375 L 209.73046875 243.38671875 L 208.21484375 244.296875 L 206.64453125 245.859375 L 205.38671875 247.734375" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 276.76171875 216.71484375 L 276.76171875 218.30859375 L 276.76171875 225.234375 L 276.16796875 234.77734375 L 276.16796875 242.23828125 L 278.19921875 252.40234375 L 279.2421875 263.3828125 L 282.19921875 278.1875 L 283.26953125 287.05859375 L 285.86328125 303.9921875 L 286.34375 310.16015625 L 287.05078125 313.3671875 L 287.36328125 315.2421875 L 287.36328125 315.7578125 L 287.36328125 315.2734375" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path><path d="M 279.8046875 259.83203125 L 279.5625 259.83203125 L 280.96484375 259.83203125 L 285.1875 259.83203125 L 290.5390625 259.83203125 L 297.1328125 259.83203125 L 305.8359375 258.8671875 L 313.78125 257.44921875 L 319.24609375 257.078125 L 328.1640625 255.375 L 334.7578125 254.0703125 L 340.703125 252.79296875 L 344.92578125 251.99609375 L 349.1484375 251.2265625 L 351.44921875 250.91015625 L 352.64453125 250.91015625 L 353.16015625 250.91015625" stroke="#000000" stroke-width="6" stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dasharray=""></path></svg>
    """

    try:
        png_file_path = svg_path_to_png(svg_string)
        if png_file_path is None:
            return "Error: The image was not converted correctly."

        with open(png_file_path, "rb") as file:
            uploaded_file = client.files.create(
                file=file,
                purpose="vision"
            )

        thread = client.beta.threads.create()

        client.beta.threads.messages.create(
            thread_id=thread.id,
            role="user",
            content=[
                {"type": "text", "text": content},
                {"type": "image_file", "image_file": {"file_id": uploaded_file.id}}
            ]
        )

        run = client.beta.threads.runs.create(
            thread_id=thread.id,
            assistant_id=assistant.id
        )

        while True:
            run = client.beta.threads.runs.retrieve(thread_id=thread.id, run_id=run.id)
            if run.status == "completed":
                break
            elif run.status in ["failed", "cancelled", "expired"]:
                return f"Run failed: {run.last_error}"
            time.sleep(1)

        messages = client.beta.threads.messages.list(thread_id=thread.id)

        if messages.data:
            for message in reversed(messages.data):
                if message.role == "assistant":
                    for content in message.content:
                        if content.type == 'text':
                            return content.text.value

        return "No response found in the messages."

    except Exception as e:
        return f"An error occurred: {str(e)}"
    finally:
        if 'png_file_path' in locals() and png_file_path:
            os.unlink(png_file_path)

def main():
    result = analysis("이미지 분석, 오늘은 특별한 계획 없이 집에서 휴식을 취했다. 바쁜 일상 속에서 여유롭게 시간을 보내는 것이 얼마나 중요한지 다시 깨달았다. 충분한 휴식 덕분에 몸과 마음이 충전되는 기분이었다.")
    print(result)

if __name__ == '__main__':
    main()
